<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>vueé¡¹ç›®æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</title>
      <link href="2020/10/30/vue-xiang-mu-xing-neng-you-hua-fang-an/"/>
      <url>2020/10/30/vue-xiang-mu-xing-neng-you-hua-fang-an/</url>
      
        <content type="html"><![CDATA[<h1 id="æŒ‰éœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"><a href="#æŒ‰éœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="æŒ‰éœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"></a>æŒ‰éœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</h1><p>é¡¹ç›®å¼•å…¥è¿‡å¤šçš„ç¬¬ä¸‰æ–¹åº“ä¼šå¢å¤§é¡¹ç›®ä½“ç§¯ï¼Œå¸¦æ¥æ€§èƒ½é—®é¢˜<br>ã€‚ä»¥ Bootstrap ä¸ºä¾‹ï¼Œå¦‚æœä½ åªæ˜¯ç”¨ä¸€ä¸‹å®ƒçš„å“åº”å¼æœºåˆ¶ï¼Œè¿˜ä¸å¦‚è‡ªå·±æ‰‹å†™ç›¸å…³çš„ CSSï¼Œä¹Ÿä¸ä¼šå¤ªå¤æ‚ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦å¼•å…¥æ•´ä¸ªåº“ã€‚moment.jsï¼ŒLodash.jsè¿™äº›åº“ä¸ºäº†æ™®é€‚æ€§ï¼Œæä¾›äº†å°½å¯èƒ½å¤šçš„åŠŸèƒ½ï¼Œä½†ä½ çš„é¡¹ç›®å¯èƒ½åªç”¨äº†æå°‘éƒ¨åˆ†ã€‚æˆ‘ä»¬ä¸é¼“åŠ±é‡å¤é€ è½®å­ï¼Œä½†æ˜¯è¦æŒ‰éœ€å¼•å…¥ã€‚ç°åœ¨å¾ˆå¤šåº“éƒ½æä¾›äº† ES æ¨¡å—åŒ–çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p>é‡‡ç”¨æŒ‰éœ€å¼•å…¥çš„æ–¹å¼å¼•å…¥ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œå‡å°‘åœ¨å…¥å£æ–‡ä»¶å…¨å±€å¼•å…¥ã€‚</p><h1 id="è·¯ç”±æ‡’åŠ è½½"><a href="#è·¯ç”±æ‡’åŠ è½½" class="headerlink" title="è·¯ç”±æ‡’åŠ è½½"></a>è·¯ç”±æ‡’åŠ è½½</h1><p>è·¯ç”±æ‡’åŠ è½½ä¹Ÿå¯ä»¥æé«˜å…¥å£é¡µé¢çš„åŠ è½½é€Ÿåº¦ï¼Œå› ä¸ºå¾ˆå¤šè·¯ç”±é¡µé¢åœ¨å¤šæ•°æƒ…å†µä¸‹å¹¶æ²¡æœ‰è¢«è®¿é—®ï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™æ”¾åˆ°å•ç‹¬çš„æ–‡ä»¶é‡Œå¯ä»¥å‡å°‘å…¥å£é¡µçš„ä½“ç§¯ã€‚è·¯ç”±æ‡’åŠ è½½æ˜¯é€šè¿‡ webpack çš„åŠ¨æ€ importæ¥å®ç°çš„ã€‚</p><pre><code>// in router.jsimport Home from '@/views/Home.vue'; // é™æ€ importconst About = () =&gt; import('@/views/About.vue'); // åŠ¨æ€ importconst router = new VueRouter({  routes: [    { path: '/', component: Home },    { path: '/about', component: About }  ]})</code></pre><p>å¦å¤–ï¼Œè¿™äº›æ‡’åŠ è½½çš„è·¯ç”±è¿˜å¯ä»¥åˆ†ç»„ï¼Œè®©ç›¸å…³æ€§æ¨¡å—çš„å¤šä¸ªè·¯ç”±é¡µé¢æ‰“åŒ…åˆ°åŒä¸€ä¸ª chunkï¼Œç®—æ˜¯ä¸€ç§æŠ˜ä¸­æ–¹æ¡ˆï¼šæ—¢å®ç°äº†æŒ‰éœ€åŠ è½½ï¼Œåˆä¸ä¼šè¿‡äºç¢ç‰‡åŒ–ã€‚é€‚ç”¨äºå­è·¯ç”±é¡µé¢ã€‚</p><pre><code>// in router.jsimport Home from '@/views/Home.vue'; // traditonal importsimport User from '@/views/User.vue';const About = () =&gt;  import('@/views/About.vue'); // dynamic importconst router = new VueRouter({  routes: [    { path: '/', component: Home },    { path: '/about', component: About },    { path: '/user/:id', component: User,       children: [        {          path: '/settings',          component: () =&gt; import(/* webpackChunkName: "user" */ '@/views/UserSettings')        },        {          path: '/articles',          component: () =&gt; import(/* webpackChunkName: "user" */ '@/views/UserArticles')        }      ]    }   ]})</code></pre><p>è¿™æ˜¯é€šè¿‡ webpack çš„æ³¨é‡Šè¯­æ³•/* webpackChunkName: â€œuserâ€ */å®ç°çš„ï¼ŒwebpackChunkNameç›¸åŒçš„è·¯ç”±ä¼šæ‰“è¿›åŒä¸€ä¸ª chunkæ–‡ä»¶ã€‚</p><h1 id="åªåšå±•ç¤ºç”¨æ•°æ®ç¦ç”¨å“åº”å¼"><a href="#åªåšå±•ç¤ºç”¨æ•°æ®ç¦ç”¨å“åº”å¼" class="headerlink" title="åªåšå±•ç¤ºç”¨æ•°æ®ç¦ç”¨å“åº”å¼"></a>åªåšå±•ç¤ºç”¨æ•°æ®ç¦ç”¨å“åº”å¼</h1><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®šä¹‰åœ¨ Vue ç»„ä»¶data é‡Œçš„æ•°æ®éƒ½æ˜¯å“åº”å¼çš„ï¼Œè¿™ç§æœºåˆ¶æ–¹ä¾¿äº†æ•°æ®ç»‘å®šï¼Œå½“æ•°æ®å˜åŒ–æ—¶ç•Œé¢å¾—åˆ°è‡ªåŠ¨æ›´æ–°ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬åªæ˜¯å°†æ•°æ®æ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šï¼Œä¹‹åä¹Ÿä¸ä¼šæ”¹å˜å®ƒã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬æ ¹æœ¬ç”¨ä¸ä¸Šå“åº”å¼æœºåˆ¶ï¼Œè€Œå®ç°å“åº”å¼æ˜¯æœ‰æ€§èƒ½ä»£ä»·çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å¯¹è±¡å’Œå¤§åˆ—è¡¨ã€‚</p><p>å»ºè®®å°†dataè¿˜æœ‰Vuex é‡Œé¢åªç”¨äºå±•ç¤ºçš„æ•°æ®é€šè¿‡Object.freeze()ç¦ç”¨å¯¹è±¡çš„å“åº”å¼ç‰¹æ€§ã€‚</p><h1 id="èµ„æºé‡Šæ”¾"><a href="#èµ„æºé‡Šæ”¾" class="headerlink" title="èµ„æºé‡Šæ”¾"></a>èµ„æºé‡Šæ”¾</h1><ol><li> å¦‚æœåœ¨mounted/created é’©å­ä¸­ä½¿ç”¨äº†$onï¼Œéœ€è¦åœ¨beforeDestroy ä¸­åšå¯¹åº”è§£ç»‘($off)å¤„ç†</li><li> å¦‚æœåœ¨mounted/created é’©å­ä¸­ç»‘å®šäº†DOM/BOM å¯¹è±¡ä¸­çš„äº‹ä»¶ï¼Œéœ€è¦åœ¨beforeDestroy ä¸­åšå¯¹åº”è§£ç»‘å¤„ç†</li><li> å¦‚æœåœ¨mounted/created é’©å­ä¸­ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–ï¼Œéœ€è¦åœ¨beforeDestroy ä¸­åšå¯¹åº”é”€æ¯å¤„ç†</li><li> å¦‚æœä½¿ç”¨setTimeout setIntervaléœ€è¦åœ¨beforeDestroyä¸­åšå¯¹åº”é”€æ¯å¤„ç†ï¼Œï¼ˆæœ€å¥½ä¸ç”¨ï¼‰å¯ä»¥ä½¿ç”¨nextTickä»£æ›¿</li><li> æ¨¡å—å½¢æˆçš„é—­åŒ…å†…éƒ¨å˜é‡ä½¿ç”¨å®Œåæ²¡æœ‰ç½®æˆnull</li><li> å…¨å±€å˜é‡æ²¡æœ‰å›æ”¶</li><li> ç»‘åœ¨EventBusçš„äº‹ä»¶æ²¡æœ‰è§£ç»‘ï¼Œæ³¨å†Œçš„æ€»çº¿äº‹ä»¶ï¼ˆBusï¼‰è¦åœ¨ç»„ä»¶é”€æ¯æ—¶(beforeDestroy/destroyed)å¸è½½</li></ol><h1 id="v-if-å’Œ-v-show-åŒºåˆ†ä½¿ç”¨åœºæ™¯"><a href="#v-if-å’Œ-v-show-åŒºåˆ†ä½¿ç”¨åœºæ™¯" class="headerlink" title="v-if å’Œ v-show åŒºåˆ†ä½¿ç”¨åœºæ™¯"></a>v-if å’Œ v-show åŒºåˆ†ä½¿ç”¨åœºæ™¯</h1><p>v-if&nbsp;æ˜¯&nbsp;çœŸæ­£&nbsp;çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºï¼›ä¹Ÿæ˜¯æƒ°æ€§çš„ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚</p><p>v-show&nbsp;å°±ç®€å•å¾—å¤šï¼Œ ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS çš„ display å±æ€§è¿›è¡Œåˆ‡æ¢ã€‚</p><p>æ‰€ä»¥ï¼Œv-if é€‚ç”¨äºåœ¨è¿è¡Œæ—¶å¾ˆå°‘æ”¹å˜æ¡ä»¶ï¼Œä¸éœ€è¦é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ï¼›v-show åˆ™é€‚ç”¨äºéœ€è¦éå¸¸é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ã€‚</p><h1 id="computed-å’Œ-watch-åŒºåˆ†ä½¿ç”¨åœºæ™¯"><a href="#computed-å’Œ-watch-åŒºåˆ†ä½¿ç”¨åœºæ™¯" class="headerlink" title="computed å’Œ watch &nbsp;åŒºåˆ†ä½¿ç”¨åœºæ™¯"></a>computed å’Œ watch &nbsp;åŒºåˆ†ä½¿ç”¨åœºæ™¯</h1><p>ï¼ˆ1ï¼‰computedï¼š&nbsp;æ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶å®ƒå±æ€§å€¼ï¼Œå¹¶ä¸” computed çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å®ƒä¾èµ–çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜ï¼Œä¸‹ä¸€æ¬¡è·å– computed çš„å€¼æ—¶æ‰ä¼šé‡æ–°è®¡ç®— computed &nbsp;çš„å€¼ï¼›</p><p>ï¼ˆ2ï¼‰ watchï¼š&nbsp;æ›´å¤šçš„æ˜¯ã€Œè§‚å¯Ÿã€çš„ä½œç”¨ï¼Œç±»ä¼¼äºæŸäº›æ•°æ®çš„ç›‘å¬å›è°ƒ ï¼Œæ¯å½“ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶éƒ½ä¼šæ‰§è¡Œå›è°ƒè¿›è¡Œåç»­æ“ä½œï¼›</p><p>è¿ç”¨åœºæ™¯ï¼š</p><p>å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œæ•°å€¼è®¡ç®—ï¼Œå¹¶ä¸”ä¾èµ–äºå…¶å®ƒæ•°æ®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ computedï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨ computed çš„ç¼“å­˜ç‰¹æ€§ï¼Œé¿å…æ¯æ¬¡è·å–å€¼æ—¶ï¼Œéƒ½è¦é‡æ–°è®¡ç®—ï¼›</p><p>å½“æˆ‘ä»¬éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œåº”è¯¥ä½¿ç”¨ watchï¼Œä½¿ç”¨ watch é€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ ( è®¿é—®ä¸€ä¸ª API )ï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚</p><h1 id="v-for-éå†å¿…é¡»ä¸º-item-æ·»åŠ -keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨-v-if"><a href="#v-for-éå†å¿…é¡»ä¸º-item-æ·»åŠ -keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨-v-if" class="headerlink" title="v-for éå†å¿…é¡»ä¸º item æ·»åŠ  keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨ v-if"></a>v-for éå†å¿…é¡»ä¸º item æ·»åŠ  keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨ v-if</h1><p>ï¼ˆ1ï¼‰v-for éå†å¿…é¡»ä¸º item æ·»åŠ  key</p><p>åœ¨åˆ—è¡¨æ•°æ®è¿›è¡Œéå†æ¸²æŸ“æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸€é¡¹ item è®¾ç½®å”¯ä¸€ key å€¼ï¼Œæ–¹ä¾¿ Vue.js å†…éƒ¨æœºåˆ¶ç²¾å‡†æ‰¾åˆ°è¯¥æ¡åˆ—è¡¨æ•°æ®ã€‚å½“ state æ›´æ–°æ—¶ï¼Œæ–°çš„çŠ¶æ€å€¼å’Œæ—§çš„çŠ¶æ€å€¼å¯¹æ¯”ï¼Œè¾ƒå¿«åœ°å®šä½åˆ° diff ã€‚</p><p>ï¼ˆ2ï¼‰v-for éå†é¿å…åŒæ—¶ä½¿ç”¨ v-if</p><p>v-for æ¯” v-if ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœæ¯ä¸€æ¬¡éƒ½éœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œå°†ä¼šå½±å“é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å½“ä¹‹éœ€è¦æ¸²æŸ“å¾ˆå°ä¸€éƒ¨åˆ†çš„æ—¶å€™ï¼Œå¿…è¦æƒ…å†µä¸‹åº”è¯¥æ›¿æ¢æˆ computed å±æ€§ã€‚</p><pre><code>&lt;ul&gt;  &lt;li    v-for="user in activeUsers"    :key="user.id"&gt;    {{ user.name }}  &lt;/li&gt;&lt;/ul&gt;computed: {  activeUsers: function () {    return this.users.filter(function (user) {   return user.isActive    })  }}</code></pre><h1 id="å‡å°‘-ES6-è½¬ä¸º-ES5-çš„å†—ä½™ä»£ç "><a href="#å‡å°‘-ES6-è½¬ä¸º-ES5-çš„å†—ä½™ä»£ç " class="headerlink" title="å‡å°‘ ES6 è½¬ä¸º ES5 çš„å†—ä½™ä»£ç "></a>å‡å°‘ ES6 è½¬ä¸º ES5 çš„å†—ä½™ä»£ç </h1><p>Babel æ’ä»¶ä¼šåœ¨å°† ES6 ä»£ç è½¬æ¢æˆ ES5 ä»£ç æ—¶ä¼šæ³¨å…¥ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œä¾‹å¦‚ä¸‹é¢çš„ ES6 ä»£ç ï¼š</p><pre><code>class HelloWebpack extends Component{...}</code></pre><p>è¿™æ®µä»£ç å†è¢«è½¬æ¢æˆèƒ½æ­£å¸¸è¿è¡Œçš„ ES5 ä»£ç æ—¶éœ€è¦ä»¥ä¸‹ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p><pre><code>babel-runtime/helpers/createClass  // ç”¨äºå®ç° class è¯­æ³•babel-runtime/helpers/inherits  // ç”¨äºå®ç° extends è¯­æ³•</code></pre><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ Babel ä¼šåœ¨æ¯ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­å†…åµŒè¿™äº›ä¾èµ–çš„è¾…åŠ©å‡½æ•°ä»£ç ï¼Œå¦‚æœå¤šä¸ªæºä»£ç æ–‡ä»¶éƒ½ä¾èµ–è¿™äº›è¾…åŠ©å‡½æ•°ï¼Œé‚£ä¹ˆè¿™äº›è¾…åŠ©å‡½æ•°çš„ä»£ç å°†ä¼šå‡ºç°å¾ˆå¤šæ¬¡ï¼Œé€ æˆä»£ç å†—ä½™ã€‚ä¸ºäº†ä¸è®©è¿™äº›è¾…åŠ©å‡½æ•°çš„ä»£ç é‡å¤å‡ºç°ï¼Œå¯ä»¥åœ¨ä¾èµ–å®ƒä»¬æ—¶é€šè¿‡&nbsp;require(â€˜babel-runtime/helpers/createClassâ€™)&nbsp;çš„æ–¹å¼å¯¼å…¥ï¼Œè¿™æ ·å°±èƒ½åšåˆ°åªè®©å®ƒä»¬å‡ºç°ä¸€æ¬¡ã€‚babel-plugin-transform-runtime&nbsp;æ’ä»¶å°±æ˜¯ç”¨æ¥å®ç°è¿™ä¸ªä½œç”¨çš„ï¼Œå°†ç›¸å…³è¾…åŠ©å‡½æ•°è¿›è¡Œæ›¿æ¢æˆå¯¼å…¥è¯­å¥ï¼Œä»è€Œå‡å° babel ç¼–è¯‘å‡ºæ¥çš„ä»£ç çš„æ–‡ä»¶å¤§å°ã€‚</p><p>é¦–å…ˆï¼Œå®‰è£… babel-plugin-transform-runtime ï¼š</p><pre><code>npm install babel-plugin-transform-runtime --save-dev</code></pre><p>ç„¶åï¼Œä¿®æ”¹ .babelrc  é…ç½®æ–‡ä»¶ä¸ºï¼š</p><pre><code>"plugins": [    "transform-runtime"]</code></pre><h1 id="å¼€å¯gzipå‹ç¼©"><a href="#å¼€å¯gzipå‹ç¼©" class="headerlink" title="å¼€å¯gzipå‹ç¼©"></a>å¼€å¯gzipå‹ç¼©</h1><p>é¦–å…ˆï¼Œä¿®æ”¹productionGzip ä¸ºtrue,<br>å®‰è£… compression-webpack-plugin ï¼š</p><pre><code> //  npm install --save-dev compression-webpack-plugin  //(æ­¤å¤„æœ‰å‘) å¦‚æœæ‰“åŒ…æŠ¥é”™ï¼Œåº”è¯¥æ˜¯ç‰ˆæœ¬é—®é¢˜ ï¼Œå…ˆå¸è½½ä¹‹å‰å®‰è£…çš„æ­¤æ’ä»¶ ï¼Œç„¶åå®‰è£…ä½ç‰ˆæœ¬   npm install --save-dev compression-webpack-plugin@1.1.11</code></pre><p>ä¿®æ”¹nginxçš„é…ç½®</p><pre><code>http {  //åœ¨ httpä¸­é…ç½®å¦‚ä¸‹ä»£ç ï¼Œ   gzip on;   gzip_disable "msie6";    gzip_vary on;    gzip_proxied any;   gzip_comp_level 8; #å‹ç¼©çº§åˆ«   gzip_buffers 16 8k;   #gzip_http_version 1.1;   gzip_min_length 100; #ä¸å‹ç¼©ä¸´ç•Œå€¼   gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png; }</code></pre><h1 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½</h1><p>å¦‚æœåº”ç”¨é‡Œéœ€è¦å±•ç¤ºå¤§é‡å›¾ç‰‡ï¼Œé€šå¸¸çš„åšæ³•æ˜¯æ‡’åŠ è½½å›¾ç‰‡ã€‚æ‡’åŠ è½½çš„åŸºæœ¬åŸç†æ˜¯æå‰å‡†å¤‡å¥½å›¾ç‰‡ URLï¼Œå½“å›¾ç‰‡çœŸæ­£è¿›å…¥å¯è§†èŒƒå›´æ—¶æ‰å»åŠ è½½ã€‚å¯ä»¥æ‰‹åŠ¨å®ç°æ‡’åŠ è½½æœºåˆ¶ï¼Œä¸è¿‡æ›´æ–¹ä¾¿çš„æ˜¯ç›´æ¥ç”¨ç°æˆçš„æ’ä»¶ï¼Œæ¯”å¦‚ [vue-lazyload]<br>å®‰è£…ï¼š</p><pre><code>npm i vue-lazyload -S</code></pre><p>å¼•å…¥ï¼š</p><pre><code>import VueLazyload from 'vue-lazyload'Vue.use(VueLazyload)</code></pre><p>ä½¿ç”¨ï¼š</p><pre><code> &lt;ul&gt;    &lt;li v-for="img in list"&gt;      &lt;img v-lazy="img.src"&gt;    &lt;/li&gt;  &lt;/ul&gt;</code></pre><h1 id="cdnåŠ é€Ÿ"><a href="#cdnåŠ é€Ÿ" class="headerlink" title="cdnåŠ é€Ÿ"></a>cdnåŠ é€Ÿ</h1><p>é‡‡ç”¨cdnåŠ é€Ÿå»ä»åˆ«çš„æœåŠ¡å™¨ä¸ŠåŠ è½½ç¬¬ä¸‰æ–¹åº“è€Œéè‡ªå·±çš„æœåŠ¡å™¨ï¼Œè¿™æ ·å°±ä¼šå¿«å¾ˆå¤š.å¹¶ä¸”èƒ½èŠ‚çœè‡ªå·±æœåŠ¡å™¨çš„å¸¦å®½ã€‚</p><p>é¦–å…ˆï¼Œåœ¨index.htmlä¸­ å°†ä½ æ‰€éœ€çš„ç¬¬ä¸‰æ–¹åº“çš„é“¾æ¥åŠ è½½è¿›æ¥ï¼š</p><pre><code>&lt;script src="https://cdn.bootcdn.net/ajax/libs/vue/3.0.0-beta.18/vue.cjs.js"&gt;&lt;/script&gt;</code></pre><p>åœ¨webpack.base.conf ä¸­æ·»åŠ  externals æ¥å‘Šè¯‰webpackæˆ‘ä»¬è¿™äº›ç¬¬ä¸‰æ–¹åº“ä¸éœ€è¦æ‰“åŒ…</p><pre><code>externals:{    // keyè¡¨ç¤ºç¬¬ä¸‰æ–¹æ’ä»¶åç§°ï¼Œvalueæ˜¯æš´éœ²å‡ºçš„å…¨å±€å˜é‡    'vue':'Vue'}</code></pre><p>åœ¨ ä¸»æ–‡ä»¶main.js æˆ–è€…å…¶ä»– js ä¿®æ”¹å¼•ç”¨è¿™äº›é…ç½®çš„ç¬¬ä¸‰æ–¹æ’ä»¶</p><pre><code>// import Vue from 'vue';const Vue = require('vue');</code></pre><h1 id="Webpack-å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©"><a href="#Webpack-å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©" class="headerlink" title="Webpack å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©"></a>Webpack å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©</h1><p>å®‰è£… image-webpack-loader ï¼š</p><pre><code>npm install image-webpack-loader --save-dev</code></pre><p>ç„¶åï¼Œåœ¨ webpack.base.conf.js  ä¸­è¿›è¡Œé…ç½®ï¼š</p><pre><code>{  test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,  use:[     {      loader: 'url-loader',      options: {        limit: 10000 ,        name: '[path][name].[ext]?[hash:6]!./dir/file.png'      }    },    /*å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©*/    {      loader: 'image-webpack-loader',      query: {        progressive: true,        optimizationLevel: 7,        interlaced: false,        pngquant: {          quality: '65-90',          speed: 4        }      }    }  ]}</code></pre><h1 id="pax-uiæ¡†æ¶ç›¸å…³"><a href="#pax-uiæ¡†æ¶ç›¸å…³" class="headerlink" title="pax-uiæ¡†æ¶ç›¸å…³"></a>pax-uiæ¡†æ¶ç›¸å…³</h1><p>ï¼ˆ1ï¼‰ è¡¨å•ç»„ä»¶<br>paxç»„ä»¶çš„Formè¡¨å•ç»„ä»¶ä¼šå¯¹ç»‘å®šæ•°æ®ç›‘å¬ï¼Œè¡¨å•ç»„ä»¶å¾ˆå¤šçš„æƒ…å†µä¸‹é¡µé¢ä¼šå¡é¡¿ï¼Œåœ¨pax-formä¸Šè®¾ç½®å±€éƒ¨æ›´æ–°ï¼Œä¼šæå‡ä¸€éƒ¨åˆ†æ€§èƒ½ã€‚</p><pre><code>&lt;pax-form :form="form" :selfUpdate="true"&gt;&lt;/pax-form&gt;</code></pre><p>(2) selectç»„ä»¶<br>selectå¤§æ•°æ®é‡æƒ…å†µä¸‹ï¼Œä¼šé€ æˆé¡µé¢å…ƒç´ è¾ƒå¤šï¼Œåœ¨ieä¸Šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚å»ºè®®é‡‡ç”¨è™šæ‹Ÿæ»šåŠ¨çš„æ–¹å¼ï¼š</p><pre><code>import { RecycleScroller} from 'vue-virtual-scroller';// åœ¨Selecté¢„ç•™å¡æ§½ä¸­ä½¿ç”¨è¯¦æƒ…è§æ–‡æ¡£ï¼šIEæµè§ˆå™¨selectå¤§æ•°æ®é—®é¢˜é€ æˆè¾“å…¥ä¸æµç•…åˆ†æå¤„ç†</code></pre><p>ï¼ˆ3ï¼‰treeç»„ä»¶<br>pax-treeåœ¨ieä¸Šé—®é¢˜ä¸¥é‡,å¦‚æœå…¼å®¹ieï¼Œå»ºè®®ç”¨@pa/vue-org-tree,ä½¿ç”¨æ–¹æ³•å‚è€ƒztree.js</p><pre><code>npm install @pa/vue-org-tree --save-dev</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ–°é²œæŠ€èƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScriptåœ¨vueé¡¹ç›®ä¸­çš„åº”ç”¨</title>
      <link href="2020/10/30/ts-zai-vue-xiang-mu-zhong-de-ying-yong/"/>
      <url>2020/10/30/ts-zai-vue-xiang-mu-zhong-de-ying-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1 å¼•è¨€"></a>1 å¼•è¨€</h1><p>TypeScript æ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘çš„è‡ªç”±å’Œå¼€æºçš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œè€Œä¸”æœ¬è´¨ä¸Šå‘è¿™ä¸ªè¯­è¨€æ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹å’ŒåŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚</p><p>TypeScript ä¼˜åŠ¿ï¼š</p><ul><li>é™æ€ç±»å‹æ£€æŸ¥ä¸ä»£ç æç¤º</li><li>é€‚ç”¨å¤§å‹é¡¹ç›®å¼€å‘ï¼Œå¦‚ä»£ç é‡æ„ç­‰</li><li>æ›´å¥½çš„åä½œ</li><li>æ›´å¼ºçš„ç”Ÿäº§åŠ›</li></ul><h1 id="2-tsè¯­æ³•çŸ¥è¯†"><a href="#2-tsè¯­æ³•çŸ¥è¯†" class="headerlink" title="2 tsè¯­æ³•çŸ¥è¯†"></a>2 tsè¯­æ³•çŸ¥è¯†</h1><h2 id="2-1ç±»å‹ç³»ç»Ÿ"><a href="#2-1ç±»å‹ç³»ç»Ÿ" class="headerlink" title="2.1ç±»å‹ç³»ç»Ÿ"></a>2.1ç±»å‹ç³»ç»Ÿ</h2><p><img src="http://qj245iy9p.hn-bkt.clouddn.com/%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3.mindmap.png" alt="image"></p><h2 id="2-2ç±»å‹ä¿æŠ¤"><a href="#2-2ç±»å‹ä¿æŠ¤" class="headerlink" title="2.2ç±»å‹ä¿æŠ¤"></a>2.2ç±»å‹ä¿æŠ¤</h2><blockquote><p>ç±»å‹ä¿æŠ¤æ˜¯å¯æ‰§è¡Œè¿è¡Œæ—¶æ£€æŸ¥çš„ä¸€ç§è¡¨è¾¾å¼ï¼Œç”¨äºç¡®ä¿è¯¥ç±»å‹åœ¨ä¸€å®šçš„èŒƒå›´å†…ã€‚</p></blockquote><ol><li>as æ“ä½œç¬¦ï¼ˆç±»å‹æ–­è¨€ï¼‰<br>å½“ä½ æ¯” ts æ›´ç¡®å®šå…¶æ•°æ®ç±»å‹ï¼Œä½ èƒ½ä½¿ç”¨ as è¯­æ³•ç¡®å®šå…¶ç±»å‹ï¼Œä½†éœ€è¦éµå®ˆç±»å‹å…¼å®¹è½¬æ¢ã€‚ å¦å¤–ä¸€ç§å†™æ³•ï¼š<typename>varNameï¼Œä½†ä¸å»ºè®®ä½¿ç”¨</typename></li></ol><pre><code>function getDynamicValue(): number | string | undefined {  ...}const v = getDynamicValue(); // v:number|string|undefinedï¼Œè”åˆç±»å‹å˜é‡åªå…è®¸è®¿é—®æ‰€æœ‰ç±»å‹å…±æœ‰çš„å±æ€§// ç¡®å®šè¿”å› string(v as string).trim();</code></pre><ol start="2"><li>typeof æ“ä½œç¬¦</li></ol><pre><code>function isNumber(val: any): val is number {  return typeof val === 'number';}const a: any = 1;if (isNumber(a)) {  // a:number}</code></pre><ol start="3"><li>instanceof æ“ä½œç¬¦</li></ol><pre><code>class Base {  ...}class A extends Base {  ...}const inst: Base = new A();if (inst instanceof A) {  // inst:A}</code></pre><ol start="4"><li>å‡½æ•°æˆ–å˜é‡åé¢æ·»åŠ  !</li></ol><p>å½“è¦å»æ‰è”åˆç±»å‹çš„å¯ç©ºç±»å‹ï¼ˆnull | undefinedï¼‰,å¯ä»¥ä½¿ç”¨ js if è¯­å¥æˆ–çŸ­è·¯è¿ç®—ç¬¦å®ç°ç±»å‹ä¿æŠ¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Typescript 2.0+ !è¯­æ³•</p><pre><code>const x: string | null = getDynamicValue();// ifåˆ¤æ–­if (x) {  // x:string}// çŸ­è·¯è¿ç®—ç¬¦function f(sn: string | null) {  return sn || '';}// !è¯­æ³•x!.trim();// orconst r = [1, 2, 3, 4].find(x =&gt; x === 3)!; // r:number</code></pre><h1 id="3-å¼€å‘ç¯å¢ƒå‡†å¤‡"><a href="#3-å¼€å‘ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3 å¼€å‘ç¯å¢ƒå‡†å¤‡"></a>3 å¼€å‘ç¯å¢ƒå‡†å¤‡</h1><h2 id="3-1-æ’ä»¶å®‰è£…"><a href="#3-1-æ’ä»¶å®‰è£…" class="headerlink" title="3.1 æ’ä»¶å®‰è£…"></a>3.1 æ’ä»¶å®‰è£…</h2><h3 id="3-1-1-Webpack-è½¬è¯‘-Typescript-ç°æœ‰æ–¹æ¡ˆ"><a href="#3-1-1-Webpack-è½¬è¯‘-Typescript-ç°æœ‰æ–¹æ¡ˆ" class="headerlink" title="3.1.1 Webpack è½¬è¯‘ Typescript ç°æœ‰æ–¹æ¡ˆ"></a>3.1.1 Webpack è½¬è¯‘ Typescript ç°æœ‰æ–¹æ¡ˆ</h3><h4 id="1-ts-loader-babel-loader-fork-ts-checker-webpack-plugin"><a href="#1-ts-loader-babel-loader-fork-ts-checker-webpack-plugin" class="headerlink" title="1.ts-loader + babel-loader + fork-ts-checker-webpack-plugin"></a>1.ts-loader + babel-loader + fork-ts-checker-webpack-plugin</h4><p>ä¿®æ”¹ webpack.config.js çš„é…ç½®ï¼š</p><pre><code>{     test: /\.ts?$/,     loader: "ts-loader",    options: {        // .vueæ–‡ä»¶å¿…é¡»åŠ         appendTsSuffixTo: [/\.vue$/]    },    exclude:/node_modules/}</code></pre><p>æ¯æ¬¡é‡å»ºæ—¶ï¼Œç±»å‹è„šæœ¬çš„è¯­ä¹‰æ£€æŸ¥å™¨å¿…é¡»æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶,éšç€é¡¹ç›®å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œç¼–è¯‘æ—¶é—´çº¿æ€§å¢åŠ ã€‚è¿™æ—¶æˆ‘ä»¬ä½¿ç”¨ fork-ts-checker-webpack-plugin å¦å¤–å¼€ä¸€ä¸ªçº¿ç¨‹æ¥è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå®‰è£…ä¾èµ–ï¼š</p><pre><code>npm install -D fork-ts-checker-webpack-plugin//ä½¿ç”¨ï¼šconst ForkTsCheckerWebpackPlugin = require('fork-ts-checker-webpack-plugin');plugins:[    new ForkTsCheckerWebpackPlugin()]</code></pre><ul><li>è¿™ç§æ–¹æ¡ˆï¼Œå½“ webpack ç¼–è¯‘çš„æ—¶å€™ï¼Œts-loader ä¼šè°ƒç”¨ typescriptï¼ˆæ‰€ä»¥æœ¬åœ°é¡¹ç›®éœ€è¦å®‰è£… typescriptï¼‰ï¼Œç„¶å typescript è¿è¡Œçš„æ—¶å€™ä¼šå»è¯»å–æœ¬åœ°çš„ tsconfig.json æ–‡ä»¶ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œts-loader ä¼šè¿›è¡Œ è½¬è¯‘ å’Œ ç±»å‹æ£€æŸ¥ï¼Œæ¯å½“æ–‡ä»¶æ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šé‡æ–°å» è½¬è¯‘ å’Œ ç±»å‹æ£€æŸ¥ï¼Œå½“æ–‡ä»¶å¾ˆå¤šçš„æ—¶å€™ï¼Œå°±ä¼šç‰¹åˆ«æ…¢ï¼Œå½±å“å¼€å‘é€Ÿåº¦ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨ fork-ts-checker-webpack-plugin ï¼Œå¼€è¾Ÿä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹å»æ‰§è¡Œç±»å‹æ£€æŸ¥çš„ä»»åŠ¡ï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“ webpack é‡æ–°ç¼–è¯‘çš„é€Ÿåº¦ã€‚</li><li>fork-ts-checker-webpack-plugin  è¿™ä¸ªæ’ä»¶è¦æ±‚æœ€ä½ Node.js 6.11.5ï¼Œwebpack 4ï¼ŒTypeScript 2.1 å’Œå¯é€‰çš„ ESLint 6ï¼ˆå…¶æœ¬èº«è¦æ±‚æœ€ä½ Node.js 8.10.0ï¼‰ã€‚</li></ul><h4 id="2-babel-loader-babel-preset-typescript"><a href="#2-babel-loader-babel-preset-typescript" class="headerlink" title="2. babel-loader + @babel/preset-typescript"></a>2. babel-loader + @babel/preset-typescript</h4><p>ä¿®æ”¹webpack.config.js</p><pre><code>rules: [        {          test:/\.(tsx?|jsx?)$/,          // é»˜è®¤ä¼šè°ƒç”¨ @babel/core           use:'babel-loader'        }]</code></pre><p>.babelrc</p><pre><code>{    "presets": [        "@babel/env"        "@vue/babel-preset-jsx",        "@babel/preset-typescript"    ]}</code></pre><ul><li>è¿™ç§æ–¹æ¡ˆï¼Œå½“ webpack ç¼–è¯‘çš„æ—¶å€™ï¼Œbabel-loader ä¼šè¯»å– .babelrc é‡Œçš„é…ç½®ï¼Œä¸ä¼šè°ƒç”¨ typescriptï¼ˆæ‰€ä»¥æœ¬åœ°é¡¹ç›®æ— éœ€å®‰è£… typescriptï¼‰ï¼Œä¸ä¼šå»æ£€æŸ¥ç±»å‹</li><li> éœ€è¦é…ç½®tsconfig.jsonçš„ï¼Œå› ä¸ºéœ€è¦åœ¨å¼€å‘ä»£ç æ—¶ï¼Œè®© idea æç¤ºé”™è¯¯ä¿¡æ¯</li></ul><h2 id="3-2-tsé¡¹ç›®åŸºæœ¬æ„æˆ"><a href="#3-2-tsé¡¹ç›®åŸºæœ¬æ„æˆ" class="headerlink" title="3.2 tsé¡¹ç›®åŸºæœ¬æ„æˆ"></a>3.2 tsé¡¹ç›®åŸºæœ¬æ„æˆ</h2><p>ä¸€ä¸ªvue+tsé¡¹ç›®çš„ç›®å½•ç»“æ„ï¼ˆ<a href="https://github.com/leeycode/typeScript-vue-starter/">typeScript-vue-starter</a>ï¼‰ï¼š</p><pre><code>â”œâ”€â”€ /@types/                     # å…¨å±€ç±»å‹å£°æ˜â”œâ”€â”€ /build/                      # webpacké…ç½®æ–‡ä»¶â”œâ”€â”€ /src/                        # æºç ç›®å½•â”‚ â”œâ”€â”€ /assets/                   # é™æ€èµ„æºç›®å½•â”‚ â”œâ”€â”€ /components/               # å…¬å…±ç»„ä»¶ç›®å½•â”‚ â”œâ”€â”€ /constants/                # é¡¹ç›®constantsç›®å½•â”‚ â”‚ â”œâ”€â”€ _const.less              # lesså¸¸é‡â”‚ â”œâ”€â”€ /pages/                    # UIç»„ä»¶ç›®å½•â”‚ â”œâ”€â”€ /services/                 # è¯·æ±‚æœåŠ¡ç›®å½•â”‚ â”œâ”€â”€ /router/                   # è·¯ç”±ç›®å½•â”‚ â”œâ”€â”€ /store/                    # å­˜æ”¾storeæ–‡ä»¶ç›®å½•â”‚ â”œâ”€â”€ /style/                    # å…¨å±€æ ·å¼â”‚ â”œâ”€â”€ /utils/                    # utilsç›®å½•â”‚ â”‚ â”œâ”€â”€ request.ts               # åŸºäºfetchå°è£…çš„APIè¯·æ±‚å·¥å…·â”‚ â”‚ â”œâ”€â”€ global.ts                # å…¬å…±æ–¹æ³•åº“â”‚ â””â”€â”€ main.ts                    # é¡¹ç›®å…¥å£|â€”â€”tsconfig.json                 # tsé…ç½®|â€”â€”...</code></pre><h2 id="3-3-tsconfig-json"><a href="#3-3-tsconfig-json" class="headerlink" title="3.3 tsconfig.json"></a>3.3 tsconfig.json</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿™ä¸ªjsonæ–‡ä»¶è§„å®šäº†tsçš„ç¼–è¯‘é€‰é¡¹ï¼Œç›¸è§çš„ç¼–è¯‘é€‰é¡¹é…ç½®ï¼š</p><pre><code>{  "compilerOptions": {    "baseUrl": ".",                             // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•    "outDir": "build/dist",                     // æŒ‡å®šè¾“å‡ºç›®å½•    "module": "esnext",                         // æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'    "target": "es5",                            // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬:    "lib": ["dom", "esnext"],                   // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶    "sourceMap": true,                          // ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶    "allowJs": true,                            // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶    "jsx": "preserve",                          // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native'ç­‰    "moduleResolution": "node",                 // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic'    "strict": true                              // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹    ...  },  "include": ["src/**/*", "@types/**/*"],       // ç¼–è¯‘åŒ…å«çš„æ–‡ä»¶     "exclude": [                                  // æ’é™¤çš„æ–‡ä»¶                    "node_modules",    "build",    "scripts",    "acceptance-tests",    "webpack",    "jest",    "src/setupTests.ts",    "config"  ]}</code></pre><h2 id="3-4-å£°æ˜æ–‡ä»¶"><a href="#3-4-å£°æ˜æ–‡ä»¶" class="headerlink" title="3.4 å£°æ˜æ–‡ä»¶"></a>3.4 å£°æ˜æ–‡ä»¶</h2><h3 id="types"><a href="#types" class="headerlink" title="@types"></a>@types</h3><p>å®‰è£…ç¬¬ä¸‰æ–¹åº“ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥<a href="https://microsoft.github.io/TypeSearch//">æœç´¢DefinitelyTyped</a>ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ç¬¬ä¸‰æ–¹åœ¨ç»´æŠ¤ç±»å‹å£°æ˜ã€‚é€šè¿‡@typeså®‰è£…ï¼Œå°±èƒ½åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å®ƒçš„ç±»å‹å£°æ˜ã€‚</p><pre><code>- Partial :æŠŠ interface æ‰€æœ‰å±æ€§å˜æˆå¯é€‰// node_modules/typescript/lib/lib.es5.d.ts,å®‰è£…tsçš„æ—¶å€™ç”Ÿæˆtype Partial&lt;T&gt; = {    [P in keyof T]?: T[P];};changeFilter: (filter: Partial&lt;IRequsetParams&gt;) =&gt; void;- Event// node_modules/@types/react/index.d.ts,é€šè¿‡@typeså®‰è£…reactçš„æ—¶å€™ç”Ÿæˆ  handleClick = (e: React.MouseEvent&lt;HTMLDivElement, MouseEvent&gt;) =&gt; {    e.stopPropagation();  };- RouteComponentProps:æä¾›äº† locationã€history çš„ç±»å‹å®šä¹‰// node_modules/@types/react-router/index.d.tsexport interface ILoginProps extends RouteComponentProps {  login: (values: IUser, history: H.History) =&gt; void;}</code></pre><h3 id="è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶"><a href="#è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶" class="headerlink" title="è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶"></a>è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶</h3><p>æ‰©å±•å.d.ts ç»“å°¾å°±æ˜¯é¡¹ç›®ä¸­çš„å£°æ˜æ–‡ä»¶ã€‚åœ¨ä¸Šé¢çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º@typesçš„æ–‡ä»¶å¤¹ï¼Œç”¨æ¥ç»´æŠ¤é¡¹ç›®ä¸­éœ€è¦çš„å˜é‡å£°æ˜ã€‚</p><ol><li>å…¨å±€å˜é‡å£°æ˜<pre><code>// configdeclare const config: {version: string;systemName: string;debug: boolean;...}// çº¦æŸåå°è¿”å›çš„æ•°æ® declare interface IResponseBody&lt;T&gt; {data: T;code: number;total: number;}...</code></pre></li><li>éjsèµ„æº</li></ol><pre><code>declare module '*.svg';declare module '*.png';declare module '*.jpg';declare module '*.module.css';declare module '*.module.scss' </code></pre><h1 id="4-ç»„ä»¶ç¼–å†™çš„å‡ ç§æ–¹æ³•"><a href="#4-ç»„ä»¶ç¼–å†™çš„å‡ ç§æ–¹æ³•" class="headerlink" title="4 ç»„ä»¶ç¼–å†™çš„å‡ ç§æ–¹æ³•"></a>4 ç»„ä»¶ç¼–å†™çš„å‡ ç§æ–¹æ³•</h1><h2 id="4-1-Vue-extend"><a href="#4-1-Vue-extend" class="headerlink" title="4.1 Vue.extend()"></a>4.1 Vue.extend()</h2><blockquote><p>Vue.extend():ä½¿ç”¨åŸºç¡€ Vue æ„é€ å™¨ï¼Œåˆ›å»ºä¸€ä¸ªâ€œå­ç±»â€ã€‚ è¿™ç§æ–¹å¼æœ€æ¥è¿‘ Vue çš„å•æ–‡ä»¶ç»„ä»¶çš„å†™æ³•ï¼Œå¦‚æœä¸€ä¸ªå®Œå–„ Vue é¡¹ç›®ä» JS æ”¹æˆ TSï¼Œç”¨è¿™ç§æ–¹æ³•å¾ˆå¿«ï¼Œåªè¦åŠ ä¸Š lang=tså’Œä¸€äº›å¿…è¦çš„å˜é‡ç±»å‹å°±å¥½äº†ï¼Œç„¶åç”¨Vue.extend()åŒ…è£¹å°±å¥½ã€‚</p></blockquote><p>main.js æ”¹ä¸º main.ts å†…å®¹æ”¹æˆï¼š</p><pre><code>import Vue from "vue";import App from "./App.vue";new Vue({    el:"#app",    render:h=&gt;h(App)});</code></pre><p>ç»„ä»¶å†™æ³•ï¼š</p><pre><code>&lt;template&gt;    &lt;h1&gt;{{name}}&lt;/h1&gt;&lt;/template&gt;&lt;script lang="ts"&gt;//ä¹Ÿæ‰§è¡Œtsx,ä¹Ÿå°±æ˜¯jsxè¯­æ³•import Vue from "vue";export default Vue.extend({    data(){        return {            name:'liwu'        }    }})&lt;/script&gt;&lt;style scoped&gt;h1{    color: rgb(55, 142, 230);}&lt;/style&gt;</code></pre><h2 id="4-2-vue-class-component"><a href="#4-2-vue-class-component" class="headerlink" title="4.2 vue-class-component"></a>4.2 vue-class-component</h2><blockquote><p>é€šå¸¸å’Œvue-property-decoratorä¸€èµ·æ­é…ä½¿ç”¨ï¼Œï¼Œvue-property-decoratoræ˜¯åœ¨vue-class-componentä¸Šæ‰©å±•æ¥çš„ï¼Œå¹¶ä¸”æä¾›äº†å¾ˆå¤šä¿®é¥°å™¨æ¯”å¦‚ @Propå’Œ@Watchç­‰ç­‰ï¼Œä½¿ç”¨è¿™ä¸ªå¯ä»¥ç¼–å†™ç±»å¼ç»„ä»¶ã€‚</p></blockquote><p>1.ç»„ä»¶å†™æ³•ï¼š</p><pre><code>&lt;template&gt;    &lt;h1&gt;{{name}}&lt;/h1&gt;&lt;/template&gt;&lt;script lang="ts"&gt;import Vue from "vue";import Component from 'vue-class-component';// @Component è£…é¥°å™¨ä½¿ä½ çš„ç±»æˆä¸ºVueç»„ä»¶@Componentexport default class App extends Vue {    private name:string = 'liwu';}&lt;/script&gt;&lt;style scoped&gt;h1{    color: rgb(55, 142, 230);}&lt;/style&gt;</code></pre><p>ä¿®æ”¹tsconfig.jsï¼Œæ”¯æŒè£…é¥°å™¨è¯­æ³•</p><pre><code>"experimentalDecorators": true,</code></pre><h2 id="4-3-jsx"><a href="#4-3-jsx" class="headerlink" title="4.3 jsx"></a>4.3 jsx</h2><blockquote><p>JSX is an XML-like syntax extension to ECMAScript without any defined semantics. Itâ€™s NOT intended to be implemented by engines or browsers.</p></blockquote><p>1.jsxè¯­æ³•ç®€ä»‹ï¼ˆå†™reactçš„åŒå­¦è·³è¿‡ï¼‰</p><ul><li>ä¸¥æ ¼çš„æ ‡ç­¾é—­åˆ</li><li>ç»„ä»¶åè¦å¤§å†™ï¼Œå¦åˆ™è§£ææˆhtmlæ ‡ç­¾</li><li>å˜é‡ç”¨{}</li></ul><pre><code>let name = 'xxx';&lt;div&gt;{ name }&lt;/div&gt;</code></pre><ul><li>éå†ç”¨map</li></ul><pre><code>let list = ['æä¸€','æäºŒ','æä¸‰'];&lt;div&gt;    {list.map((item, index) =&gt; {    return &lt;p key={index}&gt;this is {item}&lt;/p&gt;     })} &lt;/div&gt; </code></pre><ul><li>æ¡ä»¶åˆ¤æ–­</li></ul><pre><code>&lt;div className={styles.wrapper}&gt;    {_.isEmpty(currRecord) ? null : (      &lt;Graph        graph={{ nodes, edges }}        options={this.options}        events={this.events}      /&gt;    )}&lt;/div&gt; </code></pre><ul><li>äº‹ä»¶è¦ç”¨é©¼å³°å†™æ³•ï¼Œä¼ å‚è¦ç”¨bind</li></ul><pre><code>&lt;div    className={styles.content}    onMouseEnter={this.showSwitch}    onMouseLeave={this.hideSwitch}    onClick={this.handleClick.bind(this,params)}&gt;&lt;/div&gt;</code></pre><ul><li>ä½¿ç”¨domPropsInnerHTMLæ¥æ›¿ä»£v-html</li></ul><pre><code>&lt;div    domPropsInnerHTML={this.htmlContent}&gt;&lt;/div&gt;</code></pre><p>2.ç»„ä»¶å†™æ³•</p><pre><code>import { Vue, Component } from 'vue-property-decorator';import { CreateElement } from 'vue';@Componentexport default class JSX extends Vue {  private count: number = 0;  private showInfo() {    this.count++;  }  protected render(h: CreateElement) {    return &lt;h2 onMouseenter={this.showInfo}&gt;JSX Test{this.count}&lt;/h2&gt;;  }}</code></pre><h1 id="5-classç»„ä»¶è¯¦ç»†ç”¨æ³•"><a href="#5-classç»„ä»¶è¯¦ç»†ç”¨æ³•" class="headerlink" title="5 classç»„ä»¶è¯¦ç»†ç”¨æ³•"></a>5 classç»„ä»¶è¯¦ç»†ç”¨æ³•</h1><h2 id="ä½¿ç”¨Data"><a href="#ä½¿ç”¨Data" class="headerlink" title="ä½¿ç”¨Data"></a>ä½¿ç”¨Data</h2><pre><code>@Componentexport default class HelloWorld extends Vue {  private msg: string = "welcome to my app"  private list: Array&lt;object&gt; = [    {        name: 'Melody',        age: '20'    },    {        name: 'James',        age: '20'    }  ]}</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç </p><pre><code>export default {  data() {    return {      msg: "welcome to my app",      list: [        {          name: 'Melody',          age: '20'        },        {          name: 'James',          age: '20'        }      ]    }}</code></pre><h2 id="ä½¿ç”¨props"><a href="#ä½¿ç”¨props" class="headerlink" title="ä½¿ç”¨props"></a>ä½¿ç”¨props</h2><p>å¯ä»¥æ·»åŠ  required, default, type ä¸ºpropsæŒ‡å®šéªŒè¯è¦æ±‚ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨ readonly ç¦æ­¢æ“ä½œprops</p><pre><code>import { Component, Prop, Vue } from 'vue-property-decorator'@Componentexport default class HelloWorld extends Vue {  @Prop() readonly msg!: string  @Prop({default: 'Joy Melody'}) readonly name: string  @Prop({required: true}) readonly age: number  @Prop({required: false, type: String, default: 'Developer'}) readonly job: string}</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç å¦‚ä¸‹</p><pre><code>export default {  props: {    msg,    name: {      default: 'Joy Melody'    },    age: {      required: true,    },    address: {      type: String    },    job: {      required: false,      type: string,      default: 'Developer'    }  }}</code></pre><h2 id="Computed-å±æ€§"><a href="#Computed-å±æ€§" class="headerlink" title="Computed å±æ€§"></a>Computed å±æ€§</h2><pre><code>export default class HelloWorld extends Vue {  get fullName(): string {    return this.first+ ' '+ this.last  }}</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç å¦‚ä¸‹</p><pre><code>export default {  fullName() {    return this.first + ' ' + this.last  }}</code></pre><p>å¤æ‚ç‚¹çš„æ¶‰åŠåˆ°setterå’Œgetterçš„ computedå±æ€§ï¼Œåœ¨tsä¸­å†™æ³•å¦‚ä¸‹ï¼š</p><pre><code>export default class HelloWorld extends Vue {  get fullName(): string {    return this.first+ ' '+ this.last  }  set fullName(newValue: string) {    let names = newValue.split(' ')    this.first = names[0]    this.last = names[names.length - 1]  }}</code></pre><p>ä¸tsç­‰æ•ˆçš„jså†™æ³•å¦‚ä¸‹</p><pre><code>fullName: {  get: function () {    return this.first + ' ' + this.last  },  set: function (newValue) {    let names = newValue.split(' ')    this.first = names[0]    this.last = names[names.length - 1]  }}</code></pre><h2 id="ä½¿ç”¨Watch"><a href="#ä½¿ç”¨Watch" class="headerlink" title="ä½¿ç”¨Watch"></a>ä½¿ç”¨Watch</h2><p>@Watch(path: string, options: WatchOptions = {}) </p><ul><li><p>@Watch è£…é¥°å™¨æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼špath: string è¢«ä¾¦å¬çš„å±æ€§å<br>options?: WatchOptions={} optionså¯ä»¥åŒ…å«ä¸¤ä¸ªå±æ€§</p></li><li><p>immediate?:boolean ä¾¦å¬å¼€å§‹ä¹‹åæ˜¯å¦ç«‹å³è°ƒç”¨è¯¥å›è°ƒå‡½æ•°<br>deep?:boolean è¢«ä¾¦å¬çš„å¯¹è±¡çš„å±æ€§è¢«æ”¹å˜æ—¶ï¼Œæ˜¯å¦è°ƒç”¨è¯¥å›è°ƒå‡½æ•°</p></li></ul><pre><code>@Watch('child')onChildChanged (val: string, oldVal: string) {    if (val !== oldVal) {      window.console.log(val)    }}</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç å¦‚ä¸‹</p><pre><code>watch: {    'child': {        handler: 'onChildChanged',        immediate: false,        deep: false     }},method: {    onChildChanged(val, oldVal) {        if (val !== oldVal) {          console.log(val)        }    }}</code></pre><p>ä¹Ÿå¯ä»¥å†™æˆ: @Watch(â€˜childâ€™, { immediate: true, deep: true }), ç­‰ä»·äº:</p><pre><code>watch: {    'child': {        handler: 'onChildChanged',        immediate: true,        deep: true     }},method: {    onChildChanged(val, oldVal) {        if (val !== oldVal) {          window.console.log(val)        }    }}</code></pre><h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><pre><code>export default class HelloWorld extends Vue {  public clickMe(): void {    console.log('clicked')    console.log(this.addNum(4, 2))  }  public addNum(num1: number, num2: number): number {    return num1 + num2  }}</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç å¦‚ä¸‹</p><pre><code>export default {  methods: {    clickMe() {      console.log('clicked')      console.log(this.addNum(4, 2))    }    addNum(num1, num2) {      return num1 + num2    }  }}</code></pre><h2 id="Emit"><a href="#Emit" class="headerlink" title="Emit"></a>Emit</h2><p>å­ç»„ä»¶è§¦å‘çˆ¶ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶å¹¶ä¼ é€’æ•°æ®ï¼Œåœ¨TypeScriptä¸­ä½¿ç”¨@Emit è£…é¥°å™¨</p><pre><code>import { Vue, Component, Emit } from 'vue-property-decorator'@Componentexport default class YourComponent extends Vue {  count = 0  @Emit()  addToCount(n: number) {    this.count += n  }}</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç å¦‚ä¸‹</p><pre><code>export default {  data() {    return {      count: 0    }  },  methods: {    addToCount(n) {      this.count += n      this.$emit('add-to-count', n)    }  }}</code></pre><h2 id="Mixins"><a href="#Mixins" class="headerlink" title="Mixins"></a>Mixins</h2><p>å‡è®¾å½“å‰å·²ç»æœ‰ä¸€ä¸ªmixins/ProjectMixinæ–‡ä»¶ å¦‚ä½•åœ¨å…¶ä»–ç»„ä»¶é‡Œé¢ä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p><pre><code>&lt;template&gt;  &lt;div class="project-detail"&gt;    {{ projectDetail }}  &lt;/div&gt;&lt;/template&gt;&lt;script lang="ts"&gt;import { Component, Vue, Mixins } from 'vue-property-decorator'import ProjectMixin from '@/mixins/ProjectMixin'@Componentexport default class Project extends Mixins(ProjectMixin) {  get projectDetail(): string {    return this.projName + ' ' + 'HS'  }}&lt;/script&gt;</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç å¦‚ä¸‹</p><pre><code>&lt;template&gt;  &lt;div class="project-detail"&gt;    {{ projectDetail }}  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import ProjectMixin from '@/mixins/ProjectMixin'export default {  mixins: [ ProjectMixin ],  computed: {    projectDetail() {      return this.projName + ' ' + 'HS'    }  }}&lt;/script&gt;</code></pre><p>å¤šä¸ªæ··å…¥çš„æƒ…å†µ</p><pre><code>import { Component, Mixins } from 'vue-property-decorator'export default class Test extends Mixins(Mixin1, Mixin2) {    test() {      this.methodFromMixin2()      console.log(this.valFromMixin1)    }}</code></pre><h2 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h2><p>tsæ— æ³•è¯†åˆ«vueä¸­çš„$refs,éœ€è¦æ‰‹åŠ¨æŒ‡å®šå…¶ç±»å‹ï¼š</p><pre><code>&lt;template&gt;  &lt;loading ref="loading"/&gt;  &lt;input type="text" ref="inputRef"&gt;&lt;/template&gt;&lt;script lang="ts"&gt;import { Component } from 'vue-property-decorator'import Loading from "@/components/Loading.vue";@Component({  components: { Loading }})export default class Project extends Vue { $refs!: {    loading: Loading;    inputRef: HTMLInputElement;  }; public mounted() {    this.$refs.loading.showLoading();    // (this.$refs.loading as Loading).showLoading();    this.$refs.inputRef.focus();  }}&lt;/script&gt;</code></pre><h1 id="6-è·¯ç”±"><a href="#6-è·¯ç”±" class="headerlink" title="6 è·¯ç”±"></a>6 è·¯ç”±</h1><h2 id="è·¯ç”±åˆ›å»º"><a href="#è·¯ç”±åˆ›å»º" class="headerlink" title="è·¯ç”±åˆ›å»º"></a>è·¯ç”±åˆ›å»º</h2><pre><code>import Vue from 'vue';import VueRouter, { RouteConfig } from 'vue-router';import Home from '@/pages/home/Home.vue';Vue.use(VueRouter);const routes: Array&lt;RouteConfig&gt; = [  {    path: '/',    name: 'home',    component: Home  },  {    path: '/about',    name: 'about',    component: () =&gt; import(/* webpackChunkName: "about" */ '@/pages/about/About.vue')  }];const router = new VueRouter({  routes});export default router;</code></pre><h2 id="ç»„ä»¶ä¸­ç›‘å¬è·¯ç”±"><a href="#ç»„ä»¶ä¸­ç›‘å¬è·¯ç”±" class="headerlink" title="ç»„ä»¶ä¸­ç›‘å¬è·¯ç”±"></a>ç»„ä»¶ä¸­ç›‘å¬è·¯ç”±</h2><pre><code>&lt;script lang="ts"&gt;import { Component, Vue, Watch } from 'vue-property-decorator';import { Route } from 'vue-router';@Componentexport default class About extends Vue {  @Watch('$route', { immediate: true })  private changeRouter(route: Route) {    console.log('route', route);  }}</code></pre><h2 id="ç»„ä»¶ä¸­ä½¿ç”¨è·¯ç”±å‹¾å­å‡½æ•°"><a href="#ç»„ä»¶ä¸­ä½¿ç”¨è·¯ç”±å‹¾å­å‡½æ•°" class="headerlink" title="ç»„ä»¶ä¸­ä½¿ç”¨è·¯ç”±å‹¾å­å‡½æ•°"></a>ç»„ä»¶ä¸­ä½¿ç”¨è·¯ç”±å‹¾å­å‡½æ•°</h2><p>main.tsä¸­ï¼š</p><pre><code>import { Component } from 'vue-property-decorator';Component.registerHooks([  'beforeRouteEnter',  'beforeRouteLeave',  'beforeRouteUpdate']);</code></pre><p>ç»„ä»¶ä¸­ï¼š</p><pre><code>&lt;script lang="ts"&gt;import { Component, Vue, Watch } from 'vue-property-decorator';import { Route } from 'vue-router';@Componentexport default class About extends Vue {  private beforeRouteEnter(to: Route, from: Route, next: () =&gt; void): void {    console.log('beforeRouteEnter', to, from, next);    next();   }  private beforeRouteUpdate(to: Route, from: Route, next: () =&gt; void): void {    console.log('beforeRouteUpdate'); // æš‚æ—¶ä¸ç”Ÿæ•ˆï¼Œç‰ˆæœ¬é—®é¢˜    next();  }  private beforeRouteLeave(to: Route, from: Route, next: () =&gt; void): void {    console.log('beforeRouteLeave');    next();  }}</code></pre><h1 id="7-æ•°æ®è¯·æ±‚"><a href="#7-æ•°æ®è¯·æ±‚" class="headerlink" title="7 æ•°æ®è¯·æ±‚"></a>7 æ•°æ®è¯·æ±‚</h1><p>å¯¹è¿”å›å€¼å’Œå…¥å‚åšç±»å‹çº¦æŸï¼š</p><pre><code>// global.d.ts declare interface ResponseBody&lt;T&gt; {  data: T;  code: number;  total: number;}declare interface ResponseStatus {  loading: boolean;  error: boolean;}declare interface Response&lt;T&gt; extends ResponseStatus {  res: IResponseBody&lt;T&gt;;}declare interface ResponseNotPage&lt;T&gt; extends ResponseStatus {  data: T;}declare interface PageParams {  page: number;  pageSize: number;}declare interface RequsetParams extends PageParams {  search: string;}// src/service/demo.tsexport const getInfo = (id: number) =&gt;  request&lt;ResponseBody&lt;{ id: number; address?: string; time?: string }&gt;&gt;(    Api.GET_LAST_TRACE_INFO,    {      router: { id }    }  );</code></pre><h1 id="8-å…¨å±€çŠ¶æ€ç®¡ç†"><a href="#8-å…¨å±€çŠ¶æ€ç®¡ç†" class="headerlink" title="8 å…¨å±€çŠ¶æ€ç®¡ç†"></a>8 å…¨å±€çŠ¶æ€ç®¡ç†</h1><h2 id="8-1-å¼€å§‹ä½¿ç”¨"><a href="#8-1-å¼€å§‹ä½¿ç”¨" class="headerlink" title="8.1 å¼€å§‹ä½¿ç”¨"></a>8.1 å¼€å§‹ä½¿ç”¨</h2><p>å®‰è£…ä¾èµ–</p><pre><code>npm install vuex-module-decorators --save-dev</code></pre><p>å¦‚æœæƒ³é€šè¿‡åå­—ç©ºé—´çš„å½¢å¼æ¥ä½¿ç”¨module, éœ€åœ¨@Moduleè£…é¥°å™¨ä¸­æ·»åŠ é¢å¤–çš„å‚æ•°. ä¾‹å¦‚, ä»¥ä¸‹ç¤ºä¾‹ä»£ç ä¸­æ·»åŠ ä¸€ä¸ªnamespacedä¸ºhomeçš„module</p><pre><code>// src\store\module\home.tsimport { VuexModule, Module, Mutation, Action, getModule } from 'vuex-module-decorators';import store from '@/store';@Module({ namespaced: true, dynamic: true, name: 'home', store })export default class Home extends VuexModule {  public name: string = '';  public message: string = '';  get getMessage() {    return `å½“å‰æ—¶é—´${new Date()}ï¼š${this.message}`;  }  @Mutation  private SET_NAME(newName: string): void {    this.name = newName;  }  @Mutation  private SET_MESSAGE(message: string) {    this.message = message;  }  @Action  public updateMessage(newName: string): void {    this.SET_NAME(newName);    this.SET_MESSAGE('æ¬¢è¿æ‚¨,');  }}export const HomeModule = getModule(Home);</code></pre><p>ä¸tsç­‰æ•ˆçš„jsä»£ç å¦‚ä¸‹</p><pre><code>const UserModule = {    state: {        name: '',        message: ''    },    getters: {         getMessage: state =&gt; `å½“å‰æ—¶é—´${new Date()}ï¼š${state.user.message}`    },    mutations: {         SET_NAME: (state, name) =&gt; {            state.name = name        },        SET_MESSAGE: (state, message) =&gt; {            state.message = message        }    },    actions: {         updateMessage({commit}, newName){            commit("SET_NAME", newName);            commit("SET_MESSAGE", "æ¬¢è¿æ‚¨,");        }    },}</code></pre><p>dynamicæ¨¡å¼ä¸‹çš„store</p><pre><code>// \src\store\index.tsimport Vue from 'vue';import Vuex from 'vuex';Vue.use(Vuex);// Declare empty store first, dynamically register all modules later.export default new Vuex.Store({});</code></pre><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><pre><code>// \src\pages\home\Home.vue&lt;template&gt;  &lt;div class="home"&gt;    &lt;img alt="Vue logo" src="../../assets/logo.png" /&gt;    &lt;hello-world msg="vue.js" /&gt;    {{ $store.state.home.name }}    &lt;br/&gt;    {{ info }}    &lt;button @click="handleClick"&gt;ç‚¹å‡»&lt;/button&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script lang="ts"&gt;import { Component, Vue } from 'vue-property-decorator';import HelloWorld from '@/components/HelloWorld.vue';import { HomeModule } from '@/store/modules/home';@Component({  components: {    HelloWorld  }})export default class Home extends Vue {  get info() {    return HomeModule.getMessage;  }  private handleClick() {    HomeModule.updateMessage('liwu');  }}&lt;/script&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ–°é²œæŠ€èƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•çš„åœ¨çº¿æ•°æ®mock</title>
      <link href="2019/08/30/jian-dan-de-zai-xian-shu-ju-mock/"/>
      <url>2019/08/30/jian-dan-de-zai-xian-shu-ju-mock/</url>
      
        <content type="html"><![CDATA[<h1 id="è¯´æ˜ï¼š"><a href="#è¯´æ˜ï¼š" class="headerlink" title="è¯´æ˜ï¼š"></a>è¯´æ˜ï¼š</h1><p>åœ¨æ¥å£è°ƒè¯•å‰ï¼Œå‰ç«¯æ ¹æ®å®šä¹‰å¥½çš„æ¥å£æ–‡æ¡£ï¼Œæ¨¡æ‹Ÿæ•°æ®ï¼Œå‘èµ·è¯·æ±‚ï¼Œç¼–å†™å®Œæ•´çš„é¡µé¢é€»è¾‘ï¼Œç­‰çœŸæ­£å¼€å§‹è°ƒè¯•çš„æ—¶å€™ï¼Œå°†è¯·æ±‚åœ°å€æ›´æ¢å³å¯ã€‚</p><p>æœ¬æ–‡åªä»‹ç»åœ¨çº¿ mock æ•°æ®çš„æ–¹å¼ï¼Œåœ¨çº¿ mock è·Ÿæœ¬åœ° mock æ¯”è¾ƒï¼Œå¯ä»¥çœå»å®‰è£…é…ç½®ï¼Œè¿è¡ŒæœåŠ¡ï¼Œå¤šäººåä½œæ•°æ®ä¸é€šçš„å¤šç§é—®é¢˜ã€‚</p><h1 id="ä¸€ä¸ªç®€å•çš„åˆ—å­"><a href="#ä¸€ä¸ªç®€å•çš„åˆ—å­" class="headerlink" title="ä¸€ä¸ªç®€å•çš„åˆ—å­"></a>ä¸€ä¸ªç®€å•çš„åˆ—å­</h1><p><img src="http://qj245iy9p.hn-bkt.clouddn.com/1569382088%281%29.png" alt="image"></p><p>è¿”å›ç»“æœï¼š</p><p><img src="http://qj245iy9p.hn-bkt.clouddn.com/1569382282%281%29.png" alt="image"></p><h1 id="Mock-è¯­æ³•ç®€ä»‹"><a href="#Mock-è¯­æ³•ç®€ä»‹" class="headerlink" title="Mock è¯­æ³•ç®€ä»‹"></a>Mock è¯­æ³•ç®€ä»‹</h1><h2 id="base"><a href="#base" class="headerlink" title="base"></a>base</h2><pre><code>{    "base": {    "range": "@range(3, 7)",    "string": "@string(7, 20)",    "character": "@character(\"abcde\")",    "float": "@float(60, 100)",    "integer": "@integer(60, 100)",    "natural": "@natural(60, 100)",    "boolean": "@boolean"  },}</code></pre><p>é¢„è§ˆï¼š</p><pre><code>"base": {    "range": [3,4,5,6],    "string": "qg3)zBWiLlbrsisX",    "character": "c",    "float": 66.87535733306,    "integer": 66,    "natural": 71,    "boolean": false  },</code></pre><h2 id="date"><a href="#date" class="headerlink" title="date"></a>date</h2><pre><code>"date": {    "date": "@date",    "time": "@time",    "datetime": "@datetime",    "now": "@now"  },</code></pre><p>é¢„è§ˆï¼š</p><pre><code>"date": {    "date": "1971-10-18",    "time": "02:04:17",    "datetime": "1985-03-10 22:47:49",    "now": "2019-09-25 13:56:44"    }</code></pre><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><pre><code> "image": {    "image": "@image(\"200x200\", \"#50B347\", \"#FFF\", \"FastMock\")"  },</code></pre><p>é¢„è§ˆï¼š</p><pre><code>"image": {    "image": "http://dummyimage.com/200x200/50B347/FFF&amp;text=FastMock"  },</code></pre><h2 id="text"><a href="#text" class="headerlink" title="text"></a>text</h2><pre><code>"text": {    "paragraph": "@paragraph(1, 3)",    "sentence": "@sentence(3, 5)",    "word": "@word(3, 5)",    "title": "@title(3, 5)",    "cparagraph": "@cparagraph(1, 3)",    "csentence": "@csentence(3, 5)",    "cword": "@cword(\"é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å\", 5, 7)",    "ctitle": "@ctitle(3, 5)"  },</code></pre><p>é¢„è§ˆï¼š</p><pre><code> "text": {    "paragraph": "Gifp ifnk hrreyi foajbgielv doijqrd ffaooi hlwstfcfw nrgsioum wtgashcoiy sintskl hnjk ebcsec. Bhlhghu embjvvs bckwkibqhs qgqz psu mjsodprwf exidxyqnq cdyqoatr xkezagaqu ijrcqrj vvxwdwgq ivv jxcpeybpus sojcn cscdlnmi kopzvuqfin.",    "sentence": "Xuqxp qvek ttgiq.",    "word": "ynug",    "title": "Cdnsxa Yjhrlbb Rmofrixln Jubgpxm Gjpdujgryi",    "cparagraph": "è£…å¢å…‹ä½“éƒ½æœˆæ¯æ‰‹ç‰©å³ç”¨å‘¨å‡ æƒ³å†›ç‚¹ç¨‹ã€‚å°†è§’æƒå“é‡‘åç”Ÿå€™ç¤¾æ ¹åˆ©æƒ…ä¹Ÿé¾™ã€‚åŒ–å¿…å»è¾¹ç»‡ä¼—ä¸œä½å²å›é™…å¹³é©¬è‡³ã€‚",    "csentence": "å­˜æ–­å®ã€‚",    "cword": "ä¸‰ä¸ƒä¹å…­å…­",    "ctitle": "æ²¹çœ¼é‡‡å°"  },</code></pre><h2 id="name"><a href="#name" class="headerlink" title="name"></a>name</h2><pre><code>"name": {    "first": "@first",    "last": "@last",    "name": "@name",    "cfirst": "@cfirst",    "clast": "@clast",    "cname": "@cname"  },</code></pre><p>é¢„è§ˆï¼š</p><pre><code>"name": {    "first": "Jennifer",    "last": "Anderson",    "name": "Laura Moore",    "cfirst": "èƒ¡",    "clast": "ç§€å…°",    "cname": "å§œæ•"  },</code></pre><h2 id="web"><a href="#web" class="headerlink" title="web"></a>web</h2><pre><code>"web": {    "url": "@url",    "domain": "@domain",    "protocol": "@protocol",    "tld": "@tld",    "email": "@email",    "ip": "@ip"  },</code></pre><p>é¢„è§ˆï¼š</p><pre><code>"web": {    "url": "mid://nypjj.kr/mizdvfhl",    "domain": "jbgmh.cn",    "protocol": "ftp",    "tld": "fj",    "email": "r.bdwejkiuy@ltatgpp.an",    "ip": "175.52.62.226"  },</code></pre><h2 id="address"><a href="#address" class="headerlink" title="address"></a>address</h2><pre><code>"address": {    "region": "@region",    "province": "@province",    "city": "@city(true)",    "county": "@county(true)",    "zip": "@zip"  },</code></pre><p>é¢„è§ˆï¼š</p><pre><code>"address": {    "region": "åä¸­",    "province": "äº‘å—çœ",    "city": "å¤©æ´¥ å¤©æ´¥å¸‚",    "county": "å°æ¹¾ é‡‘é—¨å¿ é‡‘å®ä¹¡",    "zip": "539375"  },</code></pre><h2 id="miscellaneous"><a href="#miscellaneous" class="headerlink" title="miscellaneous"></a>miscellaneous</h2><pre><code> "miscellaneous": {    "id": "@id",    "guid": "@guid",    "increment": "@increment(1000)"  }</code></pre><p>é¢„è§ˆï¼š</p><pre><code> "miscellaneous": {    "id": "370000201504299208",    "guid": "6E6155c0-f5b5-F3F6-5F0D-23EB44C21313",    "increment": 253109  }</code></pre><h1 id="Mock-é«˜é˜¶ç”¨æ³•"><a href="#Mock-é«˜é˜¶ç”¨æ³•" class="headerlink" title="Mock é«˜é˜¶ç”¨æ³•"></a>Mock é«˜é˜¶ç”¨æ³•</h1><blockquote><p>Mock èƒ½æ”¯æŒ functionï¼Œfunction ä¸­ä¸èƒ½ç”¨ä¸Šé¢çš„@XX,ç”¨ Mock.mock(â€œ@xxxâ€)æ›¿ä»£ã€‚function ä¸­è¿˜èƒ½è·å–å…¨éƒ¨è¯·æ±‚å¤´å’Œå‚æ•°ã€‚</p></blockquote><table><thead><tr><th>å¯¹è±¡</th><th>æè¿°</th></tr></thead><tbody><tr><td>Mock</td><td>Mock å¯¹è±¡</td></tr><tr><td>_req.url</td><td>è·å¾—è¯·æ±‚ url åœ°å€</td></tr><tr><td>_req.method</td><td>è·å–è¯·æ±‚æ–¹æ³•</td></tr><tr><td>_req.params</td><td>è·å– url å‚æ•°å¯¹è±¡</td></tr><tr><td>_req.querystring</td><td>è·å–æŸ¥è¯¢å‚æ•°å­—ç¬¦ä¸²(url ä¸­?åé¢çš„éƒ¨åˆ†)ï¼Œä¸åŒ…å« ?</td></tr><tr><td>_req.query</td><td>å°†æŸ¥è¯¢å‚æ•°å­—ç¬¦ä¸²è¿›è¡Œè§£æå¹¶ä»¥å¯¹è±¡çš„å½¢å¼è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æŸ¥è¯¢å‚æ•°å­—å­—ç¬¦ä¸²åˆ™è¿”å›ä¸€ä¸ªç©ºå¯¹è±¡</td></tr><tr><td>_req.body</td><td>å½“ post è¯·æ±‚ä»¥ x-www-form-urlencoded æ–¹å¼æäº¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°è¯·æ±‚çš„å‚æ•°å¯¹è±¡</td></tr></tbody></table><h2 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h2><pre><code>{  code: function({    _req  }) {    const userName = _req.query.userName;    return userName ? 0 : -1;  },  data: function({    _req,    Mock  }) {    const userName = _req.query.userName;    return userName ? {      token: Mock.mock("@guid()"),      userId: Mock.mock("@id(5)"),      name: userName,      avatar: Mock.mock("@image(200x100, #FF6600)"),      message: "ç™»å½•æˆåŠŸ"    } : {      message: "ç™»å½•å¤±è´¥"    }  }}</code></pre><p>é¢„è§ˆï¼š</p><p><img src="https://note.youdao.com/yws/public/resource/633e9bc706a3a274d9926f95b1806671/xmlnote/1C6017CB352F41DD9B758D064EBCFD4B/15016" alt="image"></p><h1 id="å¸¸ç”¨çš„åœ¨çº¿-mock-å·¥å…·"><a href="#å¸¸ç”¨çš„åœ¨çº¿-mock-å·¥å…·" class="headerlink" title="å¸¸ç”¨çš„åœ¨çº¿ mock å·¥å…·"></a>å¸¸ç”¨çš„åœ¨çº¿ mock å·¥å…·</h1><ul><li><p>ğŸ’› <a href="https://www.fastmock.site/">fast-mock</a></p></li><li><p>ğŸ’— <a href="https://easy-mock.com/">easy-mock</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯è¯·æ±‚æ–¹å¼ï¼šxhrã€ajaxã€axiosä¸fetchçš„åŒºåˆ«æ¯”è¾ƒ</title>
      <link href="2017/06/13/qian-duan-qing-qiu-fang-shi-xhr-ajax-axios-yu-fetch-de-qu-bie-bi-jiao/"/>
      <url>2017/06/13/qian-duan-qing-qiu-fang-shi-xhr-ajax-axios-yu-fetch-de-qu-bie-bi-jiao/</url>
      
        <content type="html"><![CDATA[<p>è¿™äº›éƒ½æ˜¯å¼‚æ­¥è¯·æ±‚æ•°æ®çš„æ–¹æ³•ã€‚åœ¨ä¸é‡æ–°åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œäº¤æ¢æ•°æ®ï¼Œæˆ–æ›´æ–°é¡µé¢ã€‚</p><h1 id="XMLHttpRequestå¯¹è±¡"><a href="#XMLHttpRequestå¯¹è±¡" class="headerlink" title="XMLHttpRequestå¯¹è±¡"></a>XMLHttpRequestå¯¹è±¡</h1><p>ä¼˜ç‚¹ï¼š</p><ul><li>ä¸é‡æ–°åŠ è½½é¡µé¢çš„æƒ…å†µä¸‹æ›´æ–°ç½‘é¡µ</li><li>åœ¨é¡µé¢å·²åŠ è½½åä»æœåŠ¡å™¨è¯·æ±‚/æ¥æ”¶æ•°æ®</li><li>åœ¨åå°å‘æœåŠ¡å™¨å‘é€æ•°æ®</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒç¹çï¼Œéœ€è¦è®¾ç½®å¾ˆå¤šå€¼ã€‚</li><li>æ—©æœŸçš„IEæµè§ˆå™¨æœ‰è‡ªå·±çš„å®ç°ï¼Œè¿™æ ·éœ€è¦å†™å…¼å®¹ä»£ç ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><pre><code>if (window.XMLHttpRequest) { // model browser  xhr = new XMLHttpRequest()} else if (window.ActiveXObject) { // IE 6 and older  xhr = new ActiveXObject('Microsoft.XMLHTTP')}xhr.open('POST', url, true)xhr.send(data)xhr.onreadystatechange = function () {if (request.readyState === 4) { // æˆåŠŸå®Œæˆ        // åˆ¤æ–­å“åº”çŠ¶æ€ç         if (request.status === 200) {            // æˆåŠŸï¼Œé€šè¿‡responseTextæ‹¿åˆ°å“åº”çš„æ–‡æœ¬:            return success(request.responseText);        } else {            // å¤±è´¥ï¼Œæ ¹æ®å“åº”ç åˆ¤æ–­å¤±è´¥åŸå› :            return fail(request.status);        }    } else {        // HTTPè¯·æ±‚è¿˜åœ¨ç»§ç»­...    }}</code></pre><h1 id="jQuery-ajax"><a href="#jQuery-ajax" class="headerlink" title="jQuery ajax"></a>jQuery ajax</h1><p>AJAXè¯·æ±‚ä¹Ÿå…¼å®¹äº†å„æµè§ˆå™¨ï¼Œå¯¹XMLHttpRequestå¯¹è±¡çš„å°è£…ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å¯¹åŸç”ŸXHRçš„å°è£…ï¼Œåšäº†å…¼å®¹å¤„ç†ï¼Œç®€åŒ–äº†ä½¿ç”¨ã€‚</li><li>å¢åŠ äº†å¯¹JSONPçš„æ”¯æŒï¼Œå¯ä»¥ç®€å•å¤„ç†éƒ¨åˆ†è·¨åŸŸã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å¦‚æœæœ‰å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”æœ‰ä¾èµ–å…³ç³»çš„è¯ï¼Œå®¹æ˜“å½¢æˆå›è°ƒåœ°ç‹±ã€‚</li><li>æœ¬èº«æ˜¯é’ˆå¯¹MVCçš„ç¼–ç¨‹ï¼Œä¸ç¬¦åˆç°åœ¨å‰ç«¯MVVMçš„æµªæ½®ã€‚</li><li>ajaxæ˜¯jQueryä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚å¦‚æœåªæ˜¯è¦ä½¿ç”¨ajaxå´è¦å¼•å…¥æ•´ä¸ªjQueryéå¸¸çš„ä¸åˆç†ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><pre><code>$.ajax({  type: 'POST',  url: url,   data: data,  dataType: dataType,  success: function () {},  error: function () {}})</code></pre><h1 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h1><p>Axiosæ˜¯ä¸€ä¸ªåŸºäºpromiseçš„HTTPåº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚å®ƒæœ¬è´¨ä¹Ÿæ˜¯å¯¹åŸç”ŸXMLHttpRequestçš„å°è£…ï¼Œåªä¸è¿‡å®ƒæ˜¯Promiseçš„å®ç°ç‰ˆæœ¬ï¼Œç¬¦åˆæœ€æ–°çš„ESè§„èŒƒã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ä»æµè§ˆå™¨ä¸­åˆ›å»ºXMLHttpRequests</li><li>ä» node.js åˆ›å»º http è¯·æ±‚</li><li>æ”¯æŒ Promise API</li><li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li><li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®</li><li>å–æ¶ˆè¯·æ±‚</li><li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li><li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRF</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>åªæŒç°ä»£ä»£æµè§ˆå™¨ã€‚</li></ul><pre><code>axios({    method: 'post',    url: '/user/12345',    data: {      firstName: 'liu',      lastName: 'weiqin'    }  })  .then(res =&gt; console.log(res))  .catch(err =&gt; console.log(err))</code></pre><h1 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h1><p>ä¼˜ç‚¹ï¼š</p><ul><li>è¯­æ³•ç®€æ´ï¼Œæ›´åŠ è¯­ä¹‰åŒ–</li><li>åŸºäºæ ‡å‡† Promise å®ç°ï¼Œæ”¯æŒ async/await</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>Fetch è¯·æ±‚é»˜è®¤æ˜¯ä¸å¸¦ cookie çš„ï¼Œéœ€è¦è®¾ç½® fetch(url, {credentials: â€˜includeâ€™})</li><li>æœåŠ¡å™¨è¿”å› 400ï¼Œ500 é”™è¯¯ç æ—¶å¹¶ä¸ä¼š rejectï¼Œåªæœ‰ç½‘ç»œé”™è¯¯è¿™äº›å¯¼è‡´è¯·æ±‚ä¸èƒ½å®Œæˆæ—¶ï¼Œfetch æ‰ä¼šè¢« rejectã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><pre><code>fetch('http://example.com/movies.json')  .then(function(response) {    return response.json();  })  .then(function(myJson) {    console.log(myJson);  });</code></pre><p>tså¯¹fetchç®€å•å°è£…ä¸‹ï¼š</p><pre><code>import _ from 'lodash';import 'whatwg-fetch';interface ReqInit extends RequestInit {  headers?: Record&lt;string, string&gt;;  /** eg. ?a=1 */  params?: { [key: string]: any };  /** eg. /:id/.. */  router?: { [key: string]: any };  /** è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤3000 */  timeout?: number;}async function request&lt;T = any&gt;(path: string, init: ReqInit = {}): Promise&lt;T&gt; {  const mergeInit = {    ...request.default,    ...init,    headers: { ...request.default.headers, ...init.headers },  };  const { params, router, body, timeout, headers } = mergeInit;  let url = path;  if (router) {    url = path.replace(/:([A-Za-z]+)/g, (substring, p1: string) =&gt; router[p1]);  }  if (params) {    url += _(      _.reduce(params, (prev, val, key) =&gt; `${prev}${key}=${val}&amp;`, '?'),    ).trimEnd('&amp;');  }  if (!Reflect.get(headers, 'Content-Type')) {    if (typeof body === 'string') {      Reflect.set(headers, 'Content-Type', 'application/json');    }  }  try {    const response: Response = await Promise.race([      fetch(url, mergeInit),      new Promise&lt;any&gt;((resolve, reject) =&gt; {        setTimeout(          () =&gt; reject({ status: 408, statusText: 'TIME_OUT_ERR', url }),          timeout,        );      }),    ]);    if (response.ok) {      if (request.interceptors.response) {        return await request.interceptors.response(response);      }      return await response.json();    }    throw response;  } catch (error) {    if (request.interceptors.catch) {      request.interceptors.catch(error);    }    throw error;  }}request.default = {  method: 'GET',  headers: {    Accept: '*/*',  },  mode: 'cors',  timeout: 3000,  // credentials: 'include' // send cookies} as ReqInit;request.interceptors = {  response: null,  catch: null,} as {  response: ((response: Response) =&gt; Promise&lt;any&gt;) | null;  catch: ((error: Partial&lt;Response&gt;) =&gt; void) | null;};export default request;</code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®è¯·æ±‚ </tag>
            
            <tag> å‰ç«¯åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
