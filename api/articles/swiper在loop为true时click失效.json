{"title":"swiper在loop为true时click失效","slug":"swiper在loop为true时click失效","date":"2022-08-12T01:52:33.000Z","updated":"2022-08-12T02:39:54.297Z","comments":true,"path":"api/articles/swiper在loop为true时click失效.json","excerpt":null,"covers":null,"content":"<p>最近在项目中使用swiper插件，配置loop：true无限轮播的时候，会出现第一个slide和最后一个slide点击事件失效的bug，造成这种情况的原因是：swiper的无限轮播时会自动复制第一个和最后一个页面进行轮播。但由于只复制页面没有复制点击事件，此时我们用vue写的点击事件在页面循环一周回来遇到复制的页面时，点击事件就会失效。</p>\n<blockquote>\n<p>解决的方法：通过swiper自己的监听点击方法来实现</p>\n</blockquote>\n<h2 id=\"核心代码如下：\"><a href=\"#核心代码如下：\" class=\"headerlink\" title=\"核心代码如下：\"></a>核心代码如下：</h2><pre class=\" language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"swiper-wraper\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"swiper-slide\"</span> v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"(d,i) in dataList\"</span> <span class=\"token punctuation\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"i\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>a data<span class=\"token operator\">-</span>info<span class=\"token operator\">=</span><span class=\"token string\">\"d.info\"</span><span class=\"token operator\">></span>前往查看<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n</code></pre>\n<p>使用swiper监听事件</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>swiper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Swiper</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".swiper-container\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>\n        loop<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        onClick<span class=\"token punctuation\">:</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span>mouseEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> info <span class=\"token operator\">=</span> mouseEvent<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>info\n            that<span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>通过以上方式，可以解决项目中使用swiper时点击事件失效的问题。</p>\n","more":"<p>最近在项目中使用swiper插件，配置loop：true无限轮播的时候，会出现第一个slide和最后一个slide点击事件失效的bug，造成这种情况的原因是：swiper的无限轮播时会自动复制第一个和最后一个页面进行轮播。但由于只复制页面没有复制点击事件，此时我们用vue写的点击事件在页面循环一周回来遇到复制的页面时，点击事件就会失效。</p>\n<blockquote>\n<p>解决的方法：通过swiper自己的监听点击方法来实现</p>\n</blockquote>\n<h2 id=\"核心代码如下：\"><a href=\"#核心代码如下：\" class=\"headerlink\" title=\"核心代码如下：\"></a>核心代码如下：</h2><pre><code class=\"javascript\">&lt;div class=&quot;swiper-wraper&quot;&gt;\n    &lt;div class=&quot;swiper-slide&quot; v-for=&quot;(d,i) in dataList&quot; :key=&quot;i&quot;&gt;\n        &lt;a data-info=&quot;d.info&quot;&gt;前往查看&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>使用swiper监听事件</p>\n<pre><code class=\"js\">mounted() &#123;\n    let that = this\n    this.swiper = new Swiper(&quot;.swiper-container&quot;,&#123;\n        loop: true,\n        onClick:function(e,mouseEvent) &#123;\n            let info = mouseEvent.target.dataset.info\n            that.handleClick(info)\n        &#125;\n    &#125;)\n&#125;</code></pre>\n<p>通过以上方式，可以解决项目中使用swiper时点击事件失效的问题。</p>\n","categories":[{"name":"项目总结","path":"api/categories/项目总结.json"}],"tags":[{"name":"项目总结","path":"api/tags/项目总结.json"}]}